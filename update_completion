_update () {
    local cur=${COMP_WORDS[COMP_CWORD]}

    local prev=${COMP_WORDS[COMP_CWORD-1]}
	#local prev2=${COMP_WORDS[COMP_CWORD-2]}
    local opts="1 2 3 -s -l -a -k -c -f -e -h -m -v"

    case "$prev" in
        update|up) COMPREPLY=( $(compgen -W '${opts}' -- $cur) )
            return 0
            ;;
        -e) COMPREPLY=( $(compgen -W '$(find /etc/apt/ -type f -iname *.list -printf "%f\n")' -- $cur) )
            return 0
            ;;
    esac
}

complete -F _update update up
